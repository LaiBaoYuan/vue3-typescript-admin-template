import{am as P,h as C,_ as b,B as E,a1 as w,o,c as d,b as t,a as h,a2 as m,d as e,k as s,m as p,I as v}from"./index-089552d5.js";import{E as x,a as B}from"./el-tab-pane-91645892.js";/* empty css               */import{S as N}from"./SwitchRoles-5e0e51c6.js";import{E as R}from"./index-2ce242db.js";import"./strings-8cb47a4d.js";import"./el-radio-group-fd5ebe6e.js";const k=(i,r)=>{const{value:a}=r,u=P.getters.roles;if(a&&a instanceof Array){if(a.length>0){const _=a;u.some(f=>_.includes(f))||i.parentNode&&i.parentNode.removeChild(i)}}else throw new Error(`need roles! Like v-permission="['admin','editor']"`)},A={updated(i,r){k(i,r)},mounted(i,r){k(i,r)}};function T(i){const r=C();if(i&&i instanceof Array&&i.length>0){const a=r.getters.roles,u=i;return a.some(c=>u.includes(c))}else return console.error(`need roles! Like v-permission="['admin','editor']"`),!1}const z={name:"DirectivePermission",components:{SwitchRoles:N},directives:{permission:A},data(){return{key:1}},methods:{checkPermission:T,handleRolesChange(){this.key++}}},V={class:"permission-container"},D={class:"permission-alert"},I={class:"permission-alert"},O={class:"permission-alert"},S=h("aside",null,[e(" In some cases, using v-permission will have no effect. For example: Element-UI's Tab component or el-table-column and other scenes that dynamically render dom. You can only do this with v-if. "),h("br"),e(" e.g. ")],-1);function L(i,r,a,u,_,c){const f=E("switch-roles"),n=R,y=x,g=B,l=w("permission");return o(),d("div",V,[t(f,{onChange:c.handleRolesChange},null,8,["onChange"]),(o(),d("div",{key:_.key,style:{"margin-top":"30px"}},[h("div",null,[m((o(),d("span",D,[e(" Only "),t(n,{class:"permission-tag",size:"small"},{default:s(()=>[e("admin")]),_:1}),e(" can see this ")])),[[l,["admin"]]]),m((o(),p(n,{class:"permission-sourceCode",type:"info"},{default:s(()=>[e(` v-permission="['admin']" `)]),_:1})),[[l,["admin"]]])]),h("div",null,[m((o(),d("span",I,[e(" Only "),t(n,{class:"permission-tag",size:"small"},{default:s(()=>[e("editor")]),_:1}),e(" can see this ")])),[[l,["editor"]]]),m((o(),p(n,{class:"permission-sourceCode",type:"info"},{default:s(()=>[e(` v-permission="['editor']" `)]),_:1})),[[l,["editor"]]])]),h("div",null,[m((o(),d("span",O,[e(" Both "),t(n,{class:"permission-tag",size:"small"},{default:s(()=>[e("admin")]),_:1}),e(" and "),t(n,{class:"permission-tag",size:"small"},{default:s(()=>[e("editor")]),_:1}),e(" can see this ")])),[[l,["admin","editor"]]]),m((o(),p(n,{class:"permission-sourceCode",type:"info"},{default:s(()=>[e(` v-permission="['admin','editor']" `)]),_:1})),[[l,["admin","editor"]]])])])),(o(),d("div",{key:"checkPermission"+_.key,style:{"margin-top":"60px"}},[S,t(g,{type:"border-card",style:{width:"550px"}},{default:s(()=>[c.checkPermission(["admin"])?(o(),p(y,{key:0,label:"Admin"},{default:s(()=>[e(" Admin can see this "),t(n,{class:"permission-sourceCode",type:"info"},{default:s(()=>[e(` v-if="checkPermission(['admin'])" `)]),_:1})]),_:1})):v("",!0),c.checkPermission(["editor"])?(o(),p(y,{key:1,label:"Editor"},{default:s(()=>[e(" Editor can see this "),t(n,{class:"permission-sourceCode",type:"info"},{default:s(()=>[e(` v-if="checkPermission(['editor'])" `)]),_:1})]),_:1})):v("",!0),c.checkPermission(["admin","editor"])?(o(),p(y,{key:2,label:"Admin-OR-Editor"},{default:s(()=>[e(" Both admin or editor can see this "),t(n,{class:"permission-sourceCode",type:"info"},{default:s(()=>[e(` v-if="checkPermission(['admin','editor'])" `)]),_:1})]),_:1})):v("",!0)]),_:1})]))])}const J=b(z,[["render",L]]);export{J as default};
